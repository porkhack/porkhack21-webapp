(this["webpackJsonpporkhack21-webapp"]=this["webpackJsonpporkhack21-webapp"]||[]).push([[0],{283:function(n,e){},309:function(n,e){n.exports={bookmarks:{_type:"application/vnd.oada.bookmarks.1+json",_rev:0,soils:{_type:"application/json",_rev:0,tabular:{_type:"application/json",_rev:0,mapunit:{"*":{_type:"application/json",_rev:0}},component:{"*":{_type:"application/json",_rev:0}},horizon:{"*":{_type:"application/json",_rev:0}},"official-series-descriptions":{"*":{_type:"application/json",_rev:0}}}}}}},548:function(n,e){},558:function(n,e){},560:function(n,e){},566:function(n,e){},568:function(n,e){},600:function(n,e){},601:function(n,e){},606:function(n,e){},608:function(n,e){},615:function(n,e){},634:function(n,e){},657:function(n,e){},813:function(n,e){},936:function(n,e,t){},946:function(n,e,t){"use strict";t.r(e),t.d(e,"overmind",(function(){return rn}));var a={};t.r(a),t.d(a,"state",(function(){return L})),t.d(a,"actions",(function(){return W})),t.d(a,"onInitialize",(function(){return Z}));var o={};t.r(o),t.d(o,"state",(function(){return R})),t.d(o,"actions",(function(){return V}));var r={};t.r(r),t.d(r,"state",(function(){return X})),t.d(r,"actions",(function(){return F})),t.d(r,"effects",(function(){return J}));var i={};t.r(i),t.d(i,"state",(function(){return T})),t.d(i,"actions",(function(){return Y}));var c,s,d,u,p=t(50),l=t(205),f=(t(0),t(103)),m=t.n(f),g=t(507),b=t(502),v=t.n(b),j=t(16),h=t.n(j),w=t(43),k=t(69),O="all:all",x="eyJqa3UiOiJodHRwczovL2lkZW50aXR5Lm9hZGEtZGV2LmNvbS9jZXJ0cyIsImtpZCI6ImtqY1NjamMzMmR3SlhYTEpEczNyMTI0c2ExIiwidHlwIjoiSldUIiwiYWxnIjoiUlMyNTYifQ.eyJyZWRpcmVjdF91cmlzIjpbImh0dHA6Ly92aXAzLmVjbi5wdXJkdWUuZWR1OjgwMDAvb2F1dGgyL3JlZGlyZWN0Lmh0bWwiLCJodHRwOi8vbG9jYWxob3N0OjgwMDAvb2F1dGgyL3JlZGlyZWN0Lmh0bWwiXSwidG9rZW5fZW5kcG9pbnRfYXV0aF9tZXRob2QiOiJ1cm46aWV0ZjpwYXJhbXM6b2F1dGg6Y2xpZW50LWFzc2VydGlvbi10eXBlOmp3dC1iZWFyZXIiLCJncmFudF90eXBlcyI6WyJpbXBsaWNpdCJdLCJyZXNwb25zZV90eXBlcyI6WyJ0b2tlbiIsImlkX3Rva2VuIiwiaWRfdG9rZW4gdG9rZW4iXSwiY2xpZW50X25hbWUiOiJPcGVuQVRLIiwiY2xpZW50X3VyaSI6Imh0dHBzOi8vdmlwMy5lY24ucHVyZHVlLmVkdSIsImNvbnRhY3RzIjpbIlNhbSBOb2VsIDxzYW5vZWxAcHVyZHVlLmVkdT4iXSwic29mdHdhcmVfaWQiOiIxZjc4NDc3Zi0zNTQxLTQxM2ItOTdiNi04NjQ0YjRhZjViYjgiLCJyZWdpc3RyYXRpb25fcHJvdmlkZXIiOiJodHRwczovL2lkZW50aXR5Lm9hZGEtZGV2LmNvbSIsImlhdCI6MTUxMjAwNjc2MX0.AJSjNlWX8UKfVh-h1ebCe0MEGqKzArNJ6x0nmta0oFMcWMyR6Cn2saR-oHvU8WrtUMEr-w020mAjvhfYav4EdT3GOGtaFgnbVkIs73iIMtr8Z-Y6mDEzqRzNzVRMLghj7CyWRCNJEk0jwWjOuC8FH4UsfHmtw3ouMFomjwsNLY0",y="https://porkhack.github.io/porkhack21-webapp/oauth2/redirect.html",I={OPTIONS:{redirect:y,metadata:x,scope:O},REDIRECT:y,METADATA:x,SCOPE:O,oadaDomain:""},A={domain:I.oadaDomain},_={onInitialize:function(n){var e=n.state,t=n.actions,a=window.localStorage["oada:domain"],o=window.localStorage["oada:token"];a&&(e.view.Login.domain=a),a&&o&&t.view.Login.login({token:o})},login:function(n,e){return Object(w.a)(h.a.mark((function t(){var a,o,r,i,c;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=n.state,o=n.actions,r=e.token,i=a.view.Login,c=i.domain,i.loading=!0,c=c.match(/^http/)?c:"https://"+i.domain,t.next=8,o.OADAManager.login({domain:c,token:r});case 8:i.loading=!1,a.OADAManager.connected&&(i.loggedIn=!0,window.localStorage["oada:domain"]=i.domain,window.localStorage["oada:token"]=a.OADAManager.token);case 10:case"end":return t.stop()}}),t)})))()},logout:function(n){return Object(w.a)(h.a.mark((function e(){var t,a,o;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=n.state,a=n.actions,o=t.view.Login,!t.OADAManager.connected){e.next=7;break}return e.next=5,a.OADAManager.logout();case 5:delete window.localStorage["oada:domain"],delete window.localStorage["oada:token"];case 7:o.loggedIn=!1;case 8:case"end":return e.stop()}}),e)})))()},domainChange:function(n,e){n.state.view.Login.domain=e.value},viewDemo:function(n,e){n.state.view.Login.loggedIn=!0}},L=Object(k.a)({Login:A},{}),W=Object(k.a)({Login:_},{}),Z=function(){var n=Object(w.a)(h.a.mark((function n(e){var t;return h.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=e.actions,n.next=3,t.app.onInitialize();case 3:return n.next=5,t.view.Login.onInitialize();case 5:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),M=(t(438),t(54)),C=t.n(M),D=(t(93),t(309)),z=t.n(D),N={initialize:function(n,e){return Object(w.a)(h.a.mark((function e(){var t;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.state,t=n.actions,e.next=3,t.oada.get({path:"/bookmarks/trellisfw/asns",tree:z.a});case 3:return e.next=5,t.oada.get({path:"/bookmarks/trellisfw/trading-partners",tree:z.a});case 5:t.pork.sortTradingPartners();case 6:case"end":return e.stop()}}),e)})))()},sortTradingPartners:function(n){var e=n.state,t=(n.actions,e.oada.defaultConnection),a=e.oada[t].bookmarks.trellisfw["trading-partners"];e.haulers=C.a.filter(a,{type:"hauler"}),e.processors=C.a.filter(a,{type:"processors"}),e.farmers=C.a.filter(a,{type:"farmers"})}},R=Object(k.a)({},{}),V=Object(k.a)({},N),X=Object(k.a)({},{}),F=Object(k.a)({},{onInitialize:function(n){n.state,n.actions}}),J={},S={bookmarks:{_type:"application/vnd.oada.bookmarks.1+json",_rev:0,fields:{_type:"application/vnd.oada.fields.1+json",_rev:0,fields:{"*":{_type:"application/vnd.oada.field.1+json",_rev:0,farm:{_type:"application/vnd.oada.farm.1+json"}}},farms:{"*":{_type:"application/vnd.oada.farm.1+json",_rev:0}}},seasons:{_type:"application/vnd.oada.seasons.1+json",_rev:0,"*":{_type:"application/vnd.oada.season.1+json",_rev:0,fields:{"*":{_type:"application/vnd.oada.field.1+json",_rev:0,operations:{"*":{_type:"application/vnd.oada.operation.1+json"}}}},farms:{"*":{_type:"application/vnd.oada.farm.1+json",_rev:0}},operations:{"*":{_type:"application/vnd.oada.operation.1+json",_rev:0}}}}}},T={connected:!1,currentConnection:null,domain:null,user:function(n,e){return n.currentConnection?C.a.get(e,"oada.localhost.users.me"):null}},Y={connect:function(n,e){return Object(w.a)(h.a.mark((function t(){var a,o,r,i;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=n.actions,o=n.state,n.effects,r=e.domain,e.token,i=o.OADAManager,a.OADAManager,t.abrupt("return",a.oada.connect({domain:r,options:I.OPTIONS,cache:!1,concurrency:1}).then((function(n){return n.error||(i.currentConnection=n.connectionId,i.token=n.token,i.connected=!0),n})));case 5:case"end":return t.stop()}}),t)})))()},logout:function(n){return Object(w.a)(h.a.mark((function e(){var t,a,o,r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.actions,a=n.state,o=a.OADAManager,r=o.currentConnection,delete o.token,e.next=6,t.oada.disconnect({connection_id:r});case 6:case"end":return e.stop()}}),e)})))()},getUserInfo:function(n){return Object(w.a)(h.a.mark((function e(){var t,a,o,r,i;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.actions,a=n.state,o=a.OADAManager,r=o.currentConnection,i=[{path:"/users/me"}],e.next=6,t.oada.get({requests:i,connection_id:r});case 6:case"end":return e.stop()}}),e)})))()},fetchAndWatch:function(n){return Object(w.a)(h.a.mark((function e(){var t,a,o,r,i,c,s,d,u;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.actions,a=n.state,o=a.OADAManager,r=o.currentConnection,i=[{path:"/bookmarks/fields",tree:S,watch:{actions:[t.OADAManager.onFieldChanged]}},{path:"/bookmarks/seasons",tree:S,watch:{actions:[]}}],e.next=6,t.oada.get({requests:i,connection_id:r});case 6:if(c=e.sent,s=[],!c.responses[0].error){e.next=15;break}if(404===c.responses[0].status){e.next=11;break}throw c.responses[0].error;case 11:return d=[{tree:S,data:{fields:{},farms:{}},path:"/bookmarks/fields"}],e.next=14,t.oada.put({requests:d,connection_id:r});case 14:s.push(i[0]);case 15:if(!c.responses[1].error){e.next=22;break}if(404===c.responses[1].status){e.next=18;break}throw c.responses[0].error;case 18:return u=[{tree:S,data:{},path:"/bookmarks/seasons"}],e.next=21,t.oada.put({requests:u,connection_id:r});case 21:s.push(i[1]);case 22:if(!(s.length>0)){e.next=25;break}return e.next=25,t.oada.get({requests:s,connection_id:r});case 25:case"end":return e.stop()}}),e)})))()},login:function(n,e){return Object(w.a)(h.a.mark((function t(){var a,o,r,i,c,s,d;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=n.actions,o=n.state,r=e.domain,i=e.token,c=o.OADAManager,s=a.OADAManager,c.domain=r,t.next=7,s.connect({domain:r,token:i});case 7:if(d=t.sent,d.error){t.next=16;break}return t.next=12,s.getUserInfo();case 12:return t.next=14,a.soils.initialize();case 14:return t.next=16,a.view.Map.zoomBounds();case 16:case"end":return t.stop()}}),t)})))()}},G=v()("oada"),H=Object(g.a)({app:r,oada:G,view:a,pork:o,OADAManager:i}),E=Object(l.b)(),U=(t(936),t(973)),q=t(976),B=t(168),P=t(169),Q=t(974),K=t(972),$=t(949),nn=t(34);var en=function(){var n=E(),e=n.state,t=n.actions,a=e.view.Login,o=t.view.Login;return Object(nn.jsxs)("div",{css:Object(P.a)(c||(c=Object(B.a)(["\n      height: 100vh;\n      width: 100vw;\n      display: flex;\n      flex-direction: column;\n      justify-content: center;\n      align-items: center;\n      background: url(imgs/login-background.jpg) no-repeat center center fixed;\n      background-size: cover;\n    "]))),children:[Object(nn.jsxs)("div",{css:Object(P.a)(s||(s=Object(B.a)(["\n        width: 400px;\n        display: flex;\n        flex-direction: column;\n        background: #fff;\n        padding: 15px;\n        padding-top: 7px;\n        border-radius: 5px;\n      "]))),children:[Object(nn.jsx)("img",{css:{height:300},src:"imgs/logo2.svg",alt:"logo"}),Object(nn.jsxs)(Q.a,{css:Object(P.a)(d||(d=Object(B.a)(["\n          display: flex;\n          flex-direction: column;\n        "]))),onSubmit:o.login,children:[Object(nn.jsx)(K.a,{placeholder:"OADA Domain...",value:a.domain,onChange:function(n,e){return o.domainChange(e)}}),Object(nn.jsx)($.a,{style:{marginTop:7},primary:!0,loading:a.loading,disabled:a.loading,children:"Connect to Your OADA Cloud"}),Object(nn.jsx)($.a,{style:{marginTop:7},onClick:o.viewDemo,disabled:a.loading,children:"View Demo"})]})]}),Object(nn.jsx)("a",{css:Object(P.a)(u||(u=Object(B.a)(["\n        position: absolute;\n        top: 10px;\n        right: 10px;\n        font-size: 1.2em;\n        color: #FFFFFF;\n        cursor: pointer;\n      "]))),onClick:o.logout,children:"Logout"})]})},tn=Object(U.a)((function(n){return Object(q.a)({root:{display:"flex"}})})),an=function(){var n=E(),e=n.state,t=(n.actions,tn());return e.view.Login.loggedIn?Object(nn.jsx)("div",{className:t.root,children:"Hello!"}):Object(nn.jsx)(en,{})},on=function(n){n&&n instanceof Function&&t.e(3).then(t.bind(null,977)).then((function(e){var t=e.getCLS,a=e.getFID,o=e.getFCP,r=e.getLCP,i=e.getTTFB;t(n),a(n),o(n),r(n),i(n)}))},rn=Object(p.d)(H,{devtools:!1});m.a.render(Object(nn.jsx)(l.a,{value:rn,children:Object(nn.jsx)(an,{})}),document.getElementById("root")),on()}},[[946,1,2]]]);
//# sourceMappingURL=main.fa571490.chunk.js.map